<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring Boot 教程</title>
    <style>
        :root {
            --primary-color: #6DB33F;
            --secondary-color: #5A9E2F;
            --background-color: #f5f5f5;
            --text-color: #333;
            --card-background: #ffffff;
            --hover-color: #E8F5E9;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem 0;
            background-color: var(--card-background);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 2.5rem;
        }

        h2 {
            color: var(--primary-color);
            margin: 2rem 0 1rem 0;
            font-size: 1.8rem;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
        }

        h3 {
            color: var(--secondary-color);
            margin: 1.5rem 0 1rem 0;
            font-size: 1.4rem;
        }

        .subtitle {
            color: #666;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        p {
            margin-bottom: 1rem;
        }

        pre {
            background-color: #f8f8f8;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            border-left: 4px solid var(--primary-color);
            margin: 1rem 0;
        }

        code {
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            color: #333;
        }

        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        .card {
            background-color: var(--card-background);
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .tip {
            background-color: #E8F5E9;
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            margin: 1rem 0;
        }

        .tip-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .note {
            background-color: #E3F2FD;
            border-left: 4px solid #2196F3;
            padding: 1rem;
            margin: 1rem 0;
        }

        .note-title {
            font-weight: bold;
            color: #2196F3;
            margin-bottom: 0.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        table, th, td {
            border: 1px solid #ddd;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
        }

        th {
            background-color: var(--hover-color);
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .toc {
            background-color: var(--card-background);
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .toc-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .back-to-home {
            display: inline-block;
            margin-top: 2rem;
            padding: 0.5rem 1rem;
            background-color: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }

        .back-to-home:hover {
            background-color: var(--secondary-color);
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Spring Boot 教程</h1>
            <p class="subtitle">快速构建企业级应用</p>
        </div>
    </header>

    <main class="container">
        <div class="toc">
            <div class="toc-title">目录</div>
            <ul>
                <li><a href="#introduction">1. Spring Boot 概述</a></li>
                <li><a href="#getting-started">2. 快速入门</a></li>
                <li><a href="#project-structure">3. 项目结构</a></li>
                <li><a href="#configuration">4. 配置管理</a></li>
                <li><a href="#web-development">5. Web 开发</a></li>
                <li><a href="#data-access">6. 数据访问</a></li>
                <li><a href="#security">7. 安全控制</a></li>
                <li><a href="#testing">8. 测试</a></li>
                <li><a href="#deployment">9. 部署</a></li>
                <li><a href="#best-practices">10. 最佳实践</a></li>
            </ul>
        </div>

        <section id="introduction" class="card">
            <h2>1. Spring Boot 概述</h2>
            <p>Spring Boot 是一个基于 Spring 框架的快速开发工具，它简化了 Spring 应用的配置和部署过程。Spring Boot 遵循"约定优于配置"的原则，提供了大量自动配置功能，使开发者能够快速构建独立运行、生产级别的 Spring 应用。</p>
            
            <h3>1.1 Spring Boot 的主要特性</h3>
            <ul>
                <li><strong>独立运行</strong>：内嵌 Tomcat、Jetty 或 Undertow 服务器，无需部署 WAR 文件</li>
                <li><strong>自动配置</strong>：根据项目依赖自动配置 Spring 应用</li>
                <li><strong>无代码生成</strong>：无需 XML 配置，无需代码生成</li>
                <li><strong>生产就绪</strong>：提供指标、健康检查和外部化配置</li>
                <li><strong>简化依赖管理</strong>：提供 starter 依赖，简化构建配置</li>
            </ul>

            <h3>1.2 Spring Boot 与 Spring 的关系</h3>
            <p>Spring Boot 是 Spring 框架的扩展，它简化了 Spring 应用的开发过程。Spring Boot 不是替代 Spring，而是建立在 Spring 之上的工具，它使用 Spring 的所有功能，但简化了配置和部署。</p>

            <div class="tip">
                <div class="tip-title">小提示</div>
                <p>Spring Boot 的设计目标是简化 Spring 应用的开发，它通过自动配置和约定优于配置的原则，减少了开发者的工作量。</p>
            </div>
        </section>

        <section id="getting-started" class="card">
            <h2>2. 快速入门</h2>
            
            <h3>2.1 环境准备</h3>
            <p>在开始 Spring Boot 开发之前，需要准备以下环境：</p>
            <ul>
                <li><strong>JDK</strong>：Spring Boot 2.x 需要 JDK 8 或更高版本，Spring Boot 3.x 需要 JDK 17 或更高版本</li>
                <li><strong>构建工具</strong>：Maven 或 Gradle</li>
                <li><strong>IDE</strong>：推荐使用 IntelliJ IDEA 或 Eclipse</li>
            </ul>

            <h3>2.2 创建 Spring Boot 项目</h3>
            <p>有几种方式可以创建 Spring Boot 项目：</p>
            
            <h4>使用 Spring Initializr</h4>
            <p>访问 <a href="https://start.spring.io/" target="_blank">https://start.spring.io/</a>，填写项目信息，选择依赖，然后下载项目。</p>
            
            <h4>使用 IDE</h4>
            <p>在 IntelliJ IDEA 中，选择 File > New > Project，然后选择 Spring Initializr。</p>
            
            <h4>使用 Maven</h4>
            <pre><code>&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;3.2.3&lt;/version&gt;
    &lt;relativePath/&gt;
&lt;/parent&gt;

&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;dependency&gt;
&lt;/dependencies&gt;</code></pre>

            <h3>2.3 第一个 Spring Boot 应用</h3>
            <p>创建一个简单的 Hello World 应用：</p>
            
            <h4>主应用类</h4>
            <pre><code>package com.example.demo;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class DemoApplication {

    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }
}</code></pre>
            
            <h4>控制器类</h4>
            <pre><code>package com.example.demo;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController {

    @GetMapping("/hello")
    public String hello() {
        return "Hello, Spring Boot!";
    }
}</code></pre>
            
            <h4>运行应用</h4>
            <p>运行主应用类，然后在浏览器中访问 <a href="http://localhost:8080/hello" target="_blank">http://localhost:8080/hello</a>。</p>

            <div class="note">
                <div class="note-title">注意</div>
                <p>Spring Boot 应用默认使用 8080 端口，如果该端口被占用，可以在 application.properties 中修改 server.port 属性。</p>
            </div>
        </section>

        <section id="project-structure" class="card">
            <h2>3. 项目结构</h2>
            
            <h3>3.1 标准目录结构</h3>
            <p>Spring Boot 项目通常遵循以下目录结构：</p>
            <pre><code>src/
├── main/
│   ├── java/
│   │   └── com/
│   │       └── example/
│   │           └── demo/
│   │               ├── DemoApplication.java
│   │               ├── controller/
│   │               ├── service/
│   │               ├── repository/
│   │               ├── model/
│   │               └── config/
│   └── resources/
│       ├── application.properties
│       ├── application.yml
│       ├── static/
│       └── templates/
└── test/
    └── java/
        └── com/
            └── example/
                └── demo/
                    └── DemoApplicationTests.java</code></pre>

            <h3>3.2 主要组件</h3>
            <ul>
                <li><strong>主应用类</strong>：包含 main 方法的类，使用 @SpringBootApplication 注解</li>
                <li><strong>控制器</strong>：处理 HTTP 请求，使用 @Controller 或 @RestController 注解</li>
                <li><strong>服务</strong>：实现业务逻辑，使用 @Service 注解</li>
                <li><strong>仓库</strong>：访问数据，使用 @Repository 注解</li>
                <li><strong>模型</strong>：数据模型，通常是 POJO 类</li>
                <li><strong>配置</strong>：配置类，使用 @Configuration 注解</li>
            </ul>

            <h3>3.3 包扫描</h3>
            <p>Spring Boot 会自动扫描主应用类所在包及其子包中的组件。如果需要扫描其他包，可以使用 @ComponentScan 注解：</p>
            <pre><code>@SpringBootApplication
@ComponentScan(basePackages = {"com.example.demo", "com.example.other"})
public class DemoApplication {
    // ...
}</code></pre>

            <div class="tip">
                <div class="tip-title">小提示</div>
                <p>遵循标准的项目结构可以使代码更加清晰，便于维护和扩展。同时，也有助于其他开发者快速理解项目。</p>
            </div>
        </section>

        <section id="configuration" class="card">
            <h2>4. 配置管理</h2>
            
            <h3>4.1 配置文件</h3>
            <p>Spring Boot 支持多种配置文件格式：</p>
            <ul>
                <li><strong>application.properties</strong>：键值对格式</li>
                <li><strong>application.yml</strong>：YAML 格式，更易读</li>
                <li><strong>application-{profile}.properties/yml</strong>：特定环境的配置</li>
            </ul>

            <h4>application.properties 示例</h4>
            <pre><code># 服务器配置
server.port=8080
server.servlet.context-path=/api

# 数据库配置
spring.datasource.url=jdbc:mysql://localhost:3306/demo
spring.datasource.username=root
spring.datasource.password=password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA 配置
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true</code></pre>

            <h4>application.yml 示例</h4>
            <pre><code>server:
  port: 8080
  servlet:
    context-path: /api

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/demo
    username: root
    password: password
    driver-class-name: com.mysql.cj.jdbc.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true</code></pre>

            <h3>4.2 配置属性绑定</h3>
            <p>可以使用 @ConfigurationProperties 注解将配置属性绑定到 Java 类：</p>
            <pre><code>@Component
@ConfigurationProperties(prefix = "app")
public class AppProperties {
    private String name;
    private String description;
    
    // getters and setters
}</code></pre>

            <h3>4.3 环境配置</h3>
            <p>可以使用 spring.profiles.active 属性激活特定的环境配置：</p>
            <pre><code># application.properties
spring.profiles.active=dev</code></pre>

            <p>或者在命令行中指定：</p>
            <pre><code>java -jar app.jar --spring.profiles.active=prod</code></pre>

            <h3>4.4 外部化配置</h3>
            <p>Spring Boot 支持多种外部化配置方式，按优先级从高到低：</p>
            <ol>
                <li>命令行参数</li>
                <li>JNDI 属性</li>
                <li>Java 系统属性</li>
                <li>操作系统环境变量</li>
                <li>配置文件</li>
            </ol>

            <div class="note">
                <div class="note-title">注意</div>
                <p>敏感信息（如数据库密码）不应该直接写在配置文件中，而应该使用环境变量或外部配置服务。</p>
            </div>
        </section>

        <section id="web-development" class="card">
            <h2>5. Web 开发</h2>
            
            <h3>5.1 RESTful API</h3>
            <p>使用 @RestController 和 @RequestMapping 注解创建 RESTful API：</p>
            <pre><code>@RestController
@RequestMapping("/api/users")
public class UserController {

    @GetMapping
    public List&lt;User&gt; getAllUsers() {
        // 获取所有用户
        return userService.findAll();
    }

    @GetMapping("/{id}")
    public User getUserById(@PathVariable Long id) {
        // 获取指定 ID 的用户
        return userService.findById(id);
    }

    @PostMapping
    public User createUser(@RequestBody User user) {
        // 创建新用户
        return userService.save(user);
    }

    @PutMapping("/{id}")
    public User updateUser(@PathVariable Long id, @RequestBody User user) {
        // 更新用户
        user.setId(id);
        return userService.save(user);
    }

    @DeleteMapping("/{id}")
    public void deleteUser(@PathVariable Long id) {
        // 删除用户
        userService.deleteById(id);
    }
}</code></pre>

            <h3>5.2 请求参数处理</h3>
            <p>Spring Boot 提供了多种注解来处理请求参数：</p>
            <ul>
                <li><strong>@RequestParam</strong>：处理查询参数</li>
                <li><strong>@PathVariable</strong>：处理路径变量</li>
                <li><strong>@RequestBody</strong>：处理请求体</li>
                <li><strong>@RequestHeader</strong>：处理请求头</li>
                <li><strong>@CookieValue</strong>：处理 Cookie</li>
            </ul>

            <h3>5.3 静态资源</h3>
            <p>Spring Boot 默认从以下位置提供静态资源：</p>
            <ul>
                <li>/static</li>
                <li>/public</li>
                <li>/resources</li>
                <li>/META-INF/resources</li>
            </ul>

            <h3>5.4 模板引擎</h3>
            <p>Spring Boot 支持多种模板引擎，如 Thymeleaf、FreeMarker、Groovy 等：</p>
            <pre><code>// 添加 Thymeleaf 依赖
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>

            <pre><code>// 控制器
@Controller
public class HomeController {

    @GetMapping("/")
    public String home(Model model) {
        model.addAttribute("message", "Hello, Thymeleaf!");
        return "home";
    }
}</code></pre>

            <pre><code>&lt;!-- home.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;title&gt;Home&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1 th:text="${message}"&gt;Default Message&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

            <div class="tip">
                <div class="tip-title">小提示</div>
                <p>在开发 RESTful API 时，建议使用 @RestController 注解，它会自动将返回值转换为 JSON 格式。</p>
            </div>
        </section>

        <section id="data-access" class="card">
            <h2>6. 数据访问</h2>
            
            <h3>6.1 JPA 和 Hibernate</h3>
            <p>使用 Spring Data JPA 简化数据访问：</p>
            <pre><code>// 添加 JPA 依赖
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>

            <pre><code>// 实体类
@Entity
@Table(name = "users")
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String username;
    private String email;
    
    // getters and setters
}</code></pre>

            <pre><code>// 仓库接口
@Repository
public interface UserRepository extends JpaRepository&lt;User, Long&gt; {
    List&lt;User&gt; findByUsername(String username);
    User findByEmail(String email);
}</code></pre>

            <h3>6.2 MyBatis</h3>
            <p>使用 MyBatis 进行数据访问：</p>
            <pre><code>// 添加 MyBatis 依赖
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;3.0.3&lt;/version&gt;
&lt;/dependency&gt;</code></pre>

            <pre><code>// Mapper 接口
@Mapper
public interface UserMapper {
    @Select("SELECT * FROM users WHERE id = #{id}")
    User findById(Long id);
    
    @Insert("INSERT INTO users(username, email) VALUES(#{username}, #{email})")
    @Options(useGeneratedKeys = true, keyProperty = "id")
    int insert(User user);
}</code></pre>

            <h3>6.3 JDBC</h3>
            <p>使用 JdbcTemplate 进行数据访问：</p>
            <pre><code>// 添加 JDBC 依赖
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>

            <pre><code>// 服务类
@Service
public class UserService {
    
    @Autowired
    private JdbcTemplate jdbcTemplate;
    
    public User findById(Long id) {
        return jdbcTemplate.queryForObject(
            "SELECT * FROM users WHERE id = ?",
            new Object[]{id},
            (rs, rowNum) -> new User(
                rs.getLong("id"),
                rs.getString("username"),
                rs.getString("email")
            )
        );
    }
}</code></pre>

            <h3>6.4 事务管理</h3>
            <p>使用 @Transactional 注解管理事务：</p>
            <pre><code>@Service
public class UserService {
    
    @Autowired
    private UserRepository userRepository;
    
    @Transactional
    public User createUser(User user) {
        // 创建用户
        User savedUser = userRepository.save(user);
        
        // 创建用户角色
        roleService.assignDefaultRole(savedUser.getId());
        
        return savedUser;
    }
}</code></pre>

            <div class="note">
                <div class="note-title">注意</div>
                <p>选择合适的数据访问技术取决于项目需求。JPA 适合简单的 CRUD 操作，MyBatis 适合复杂的 SQL 查询，JDBC 适合需要完全控制 SQL 的场景。</p>
            </div>
        </section>

        <section id="security" class="card">
            <h2>7. 安全控制</h2>
            
            <h3>7.1 Spring Security</h3>
            <p>使用 Spring Security 实现安全控制：</p>
            <pre><code>// 添加 Spring Security 依赖
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>

            <pre><code>// 安全配置
@Configuration
@EnableWebSecurity
public class SecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .authorizeHttpRequests(authorize -> authorize
                .requestMatchers("/", "/home", "/public/**").permitAll()
                .requestMatchers("/admin/**").hasRole("ADMIN")
                .anyRequest().authenticated()
            )
            .formLogin(form -> form
                .loginPage("/login")
                .permitAll()
            )
            .logout(logout -> logout
                .permitAll()
            );
        
        return http.build();
    }
    
    @Bean
    public UserDetailsService userDetailsService() {
        UserDetails user = User.withDefaultPasswordEncoder()
            .username("user")
            .password("password")
            .roles("USER")
            .build();
        
        UserDetails admin = User.withDefaultPasswordEncoder()
            .username("admin")
            .password("admin")
            .roles("ADMIN")
            .build();
        
        return new InMemoryUserDetailsManager(user, admin);
    }
}</code></pre>

            <h3>7.2 JWT 认证</h3>
            <p>使用 JWT 进行无状态认证：</p>
            <pre><code>// 添加 JWT 依赖
&lt;dependency&gt;
    &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;
    &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;
    &lt;version&gt;0.11.5&lt;/version&gt;
&lt;/dependency&gt;</code></pre>

            <pre><code>// JWT 服务
@Service
public class JwtService {
    
    @Value("${jwt.secret}")
    private String secret;
    
    @Value("${jwt.expiration}")
    private Long expiration;
    
    public String generateToken(UserDetails userDetails) {
        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();
        return createToken(claims, userDetails.getUsername());
    }
    
    private String createToken(Map&lt;String, Object&gt; claims, String subject) {
        return Jwts.builder()
            .setClaims(claims)
            .setSubject(subject)
            .setIssuedAt(new Date(System.currentTimeMillis()))
            .setExpiration(new Date(System.currentTimeMillis() + expiration * 1000))
            .signWith(getSigningKey(), SignatureAlgorithm.HS256)
            .compact();
    }
    
    // 其他方法...
}</code></pre>

            <h3>7.3 OAuth2 和 OpenID Connect</h3>
            <p>使用 Spring Security OAuth2 实现 OAuth2 和 OpenID Connect：</p>
            <pre><code>// 添加 OAuth2 依赖
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>

            <pre><code>// 安全配置
@Configuration
@EnableWebSecurity
public class SecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .authorizeHttpRequests(authorize -> authorize
                .anyRequest().authenticated()
            )
            .oauth2Login(oauth2 -> oauth2
                .loginPage("/login")
            );
        
        return http.build();
    }
}</code></pre>

            <div class="tip">
                <div class="tip-title">小提示</div>
                <p>在生产环境中，应该使用更安全的密码编码器，如 BCryptPasswordEncoder，而不是默认的密码编码器。</p>
            </div>
        </section>

        <section id="testing" class="card">
            <h2>8. 测试</h2>
            
            <h3>8.1 单元测试</h3>
            <p>使用 JUnit 和 Spring Test 进行单元测试：</p>
            <pre><code>// 添加测试依赖
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>

            <pre><code>// 服务测试
@SpringBootTest
class UserServiceTest {

    @Autowired
    private UserService userService;
    
    @MockBean
    private UserRepository userRepository;
    
    @Test
    void testCreateUser() {
        // 准备测试数据
        User user = new User();
        user.setUsername("testuser");
        user.setEmail("test@example.com");
        
        when(userRepository.save(any(User.class))).thenReturn(user);
        
        // 执行测试
        User savedUser = userService.createUser(user);
        
        // 验证结果
        assertNotNull(savedUser);
        assertEquals("testuser", savedUser.getUsername());
        verify(userRepository).save(any(User.class));
    }
}</code></pre>

            <h3>8.2 集成测试</h3>
            <p>使用 @SpringBootTest 和 MockMvc 进行集成测试：</p>
            <pre><code>@SpringBootTest
@AutoConfigureMockMvc
class UserControllerTest {

    @Autowired
    private MockMvc mockMvc;
    
    @MockBean
    private UserService userService;
    
    @Test
    void testGetUser() throws Exception {
        // 准备测试数据
        User user = new User();
        user.setId(1L);
        user.setUsername("testuser");
        
        when(userService.findById(1L)).thenReturn(user);
        
        // 执行测试
        mockMvc.perform(get("/api/users/1"))
            .andExpect(status().isOk())
            .andExpect(jsonPath("$.id").value(1))
            .andExpect(jsonPath("$.username").value("testuser"));
    }
}</code></pre>

            <h3>8.3 测试配置</h3>
            <p>使用 @TestConfiguration 和 @TestPropertySource 配置测试环境：</p>
            <pre><code>@SpringBootTest
@TestPropertySource(properties = {
    "spring.datasource.url=jdbc:h2:mem:testdb",
    "spring.datasource.driver-class-name=org.h2.Driver",
    "spring.datasource.username=sa",
    "spring.datasource.password=",
    "spring.jpa.database-platform=org.hibernate.dialect.H2Dialect"
})
class DataAccessTest {
    // 测试代码...
}</code></pre>

            <div class="note">
                <div class="note-title">注意</div>
                <p>在测试中，应该使用 H2 等内存数据库，而不是实际的数据库，以避免测试数据污染生产数据。</p>
            </div>
        </section>

        <section id="deployment" class="card">
            <h2>9. 部署</h2>
            
            <h3>9.1 打包应用</h3>
            <p>使用 Maven 或 Gradle 打包应用：</p>
            <pre><code># Maven
mvn clean package

# Gradle
gradle bootJar</code></pre>

            <h3>9.2 运行应用</h3>
            <p>使用 java -jar 命令运行应用：</p>
            <pre><code>java -jar target/demo-0.0.1-SNAPSHOT.jar</code></pre>

            <h3>9.3 外部化配置</h3>
            <p>在运行时指定配置：</p>
            <pre><code>java -jar demo-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod --server.port=8081</code></pre>

            <h3>9.4 容器化部署</h3>
            <p>使用 Docker 容器化部署：</p>
            <pre><code># Dockerfile
FROM openjdk:17-jdk-slim
COPY target/demo-0.0.1-SNAPSHOT.jar app.jar
ENTRYPOINT ["java","-jar","/app.jar"]</code></pre>

            <pre><code># 构建镜像
docker build -t demo-app .

# 运行容器
docker run -p 8080:8080 demo-app</code></pre>

            <h3>9.5 云平台部署</h3>
            <p>Spring Boot 应用可以部署到各种云平台，如 AWS、Azure、Google Cloud 等。</p>

            <div class="tip">
                <div class="tip-title">小提示</div>
                <p>在生产环境中，应该使用适当的内存设置和垃圾回收参数来优化 JVM 性能。</p>
            </div>
        </section>

        <section id="best-practices" class="card">
            <h2>10. 最佳实践</h2>
            
            <h3>10.1 项目结构</h3>
            <ul>
                <li><strong>遵循标准目录结构</strong>：使用标准的包结构，如 controller、service、repository 等</li>
                <li><strong>使用适当的包名</strong>：使用有意义的包名，如 com.example.project.module</li>
                <li><strong>分离关注点</strong>：将不同功能的代码分离到不同的包中</li>
            </ul>

            <h3>10.2 配置管理</h3>
            <ul>
                <li><strong>使用 YAML 配置</strong>：YAML 格式更易读，适合复杂配置</li>
                <li><strong>环境特定配置</strong>：使用不同的配置文件管理不同环境的配置</li>
                <li><strong>敏感信息外部化</strong>：将敏感信息存储在环境变量或外部配置服务中</li>
            </ul>

            <h3>10.3 异常处理</h3>
            <ul>
                <li><strong>全局异常处理</strong>：使用 @ControllerAdvice 和 @ExceptionHandler 处理异常</li>
                <li><strong>自定义异常</strong>：创建自定义异常类，提供更详细的错误信息</li>
                <li><strong>日志记录</strong>：记录异常信息，便于调试和监控</li>
            </ul>

            <h3>10.4 性能优化</h3>
            <ul>
                <li><strong>使用连接池</strong>：配置适当的数据库连接池大小</li>
                <li><strong>缓存</strong>：使用 Spring Cache 或 Redis 缓存频繁访问的数据</li>
                <li><strong>异步处理</strong>：使用 @Async 注解处理耗时操作</li>
                <li><strong>压缩响应</strong>：启用响应压缩，减少网络传输量</li>
            </ul>

            <h3>10.5 安全最佳实践</h3>
            <ul>
                <li><strong>使用 HTTPS</strong>：在生产环境中使用 HTTPS 加密通信</li>
                <li><strong>密码加密</strong>：使用 BCrypt 等算法加密密码</li>
                <li><strong>防止 CSRF 攻击</strong>：启用 CSRF 保护</li>
                <li><strong>防止 XSS 攻击</strong>：对用户输入进行过滤和转义</li>
                <li><strong>定期更新依赖</strong>：及时更新依赖，修复安全漏洞</li>
            </ul>

            <div class="note">
                <div class="note-title">笔记</div>
                <p>遵循最佳实践可以帮助构建高质量、可维护的 Spring Boot 应用。根据项目需求和团队情况，选择合适的最佳实践。</p>
            </div>
        </section>

        <a href="../index.html" class="back-to-home">返回首页</a>
    </main>
</body>
</html> 